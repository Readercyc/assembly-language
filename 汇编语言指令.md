# 汇编语言指令

## 基本指令

### MOV 传送指令
格式：MOV DST SRC
操作：(DST)<-(SRC) ,将源操作数送到目的操作数

其中，DST是目的操作时，SRC  是源操作数

P.S
1. 源操作数与目的操作数的长度必须明确且一致，即同时为8位/16位
2. 目的操作数与源操作数不能同为存储器，不允许在两个存储单元之间直接传送数据
3. 目的操作数不能为`CS`或`IP`，因为CS:IP指向的是当前要执行的指令所在的地址
4. 目的操作数不可以是立即数

### XLAT(translate） 换码指令
格式：XLAT
操作：AL<-（BX+AL)

把BX+AL的值作为有效地址，取出其中的一个字节送AL

### XCHG 交换指令
格式：XCHG OPR1,OPR2
操作：(OPR1)<- ->(OPR2)。其中OPR1、OPR2为操作数

把两个操作数位置互换


---

## 堆栈操作指令

目的操作数地址由SS:SP指定，指令中无需给出
SP总是指向栈顶，SP的初值为栈底
当 SP = 0 栈满
当 SP = MAX 时 栈空

### PUSH
格式：PUSH OPS
1. ([SP])<-(OPD)0-7 SP-1
2. ([SP])<-(OPD)15-8 SP-1
功能：将寄存器、段寄存器或存储器中的一个字数据压入堆栈，堆栈指针-2

### POP
格式：POP OPD
操作:
1. ([SP])->(OPD)0-7 SP+1
2. ([SP])->(OPD)15-8 SP+1
功能：将栈顶元素弹出送至某一寄存器、段寄存器或存储器，堆栈指针+2

```
实现swap XCHG
PUSH AX
PUSH BX
POP AX
POP BX
```

## 标志寄存器传送指令

### 标志送AH指令LAHF
格式：LAHF
功能：将标志寄存器的低8位送入AH寄存器。
即（FLAGS)7-0 -> AH。该指令的执行对标志位无影响
应用：保护低8位，送入AH

### AH送标志指令SAHF
格式：LAHF
功能：将AH寄存器送入标志寄存器的低8位。(保护低8位，送入AH)
即（FLAGS)7-0 <- AH。
SAHF为LAHF的逆过程
应用：批量处理标志寄存器的数据

### 标志寄存器进栈指令PUSHF
格式：PUSHF
功能：将标志寄存器的全部内容压入栈

### 标志寄存器出栈指令POPF
格式：POPF
功能：将栈顶内容弹出送入标志寄存器中。即↑(SP) → FLAGS
应用：修改标志寄存器的值

---

## 地址传送指令

### 传送偏移地址指令LEA

格式：LEA OPD,OPS
功能：按原地址的寻址方式计算偏移地址，将偏移地址送入制定寄存器中（将源操作数的有效地址送到目的操作数中),其中源操作数是mem，目的操作数是一个16位的reg（寄存器)
```
MOV BX,0100H ; //(BX) = 0100H
MOV SI,0210H ; //(SI) = 0210H
LEA BX,1234[BX+SI] ; //(BX) = 1544H，基址变址相对寻址
//LEA传地址，MOV传数据
```
### 传送偏移地址及数据段首地址指令LDS
格式：LDS OPD,OPS
功能：将源操作数SRC所指向的内存单元中2个字送到指定的REG和DS（一个字 = 8位）

### 传送偏移地址及附加数据段首地址指令LES
格式：LES OPD,OPS
功能：将源操作数SRC所指向的内存单元中2个字送到指定的REG和ES（一个字 = 8位）
**基本与LDS相同**

---

## 输入输出指令

### 输入指令 IN
语句格式： IN AL,PORT
功能：（PORT) -> AL，从PORT读一个字节送给AL（8位）
语句格式： IN AX,PORT
功能：（PORT) -> AX，从PORT读一个字送给AX（16位）
语句格式： IN AX,DX
功能：（DX) -> AL，从DX读一个字节送给AL（8位）
语句格式： IN AX,DX
功能：（DX) -> AX，从DX读一个字送给AX（16位）

### 输出指令 OUT 

语句格式： OUT AL,PORT
功能：（PORT) <- AL，从AL读一个字节送给PORT（8位）
语句格式： OUT AX,PORT
功能：（PORT) <- AX，从AX读一个字送给PORT（16位）
语句格式： OUT AX,DX
功能：（DX) <- AL，从AL读一个字节送给DX（8位）
语句格式： OUT AX,DX
功能：（DX) <- AX，从AX读一个字送给DX（16位）

---
##算术运算类指令


### 加1指令（i++) INC

### 不带进位的加指令 ADD

格式：ADD OPD,OPS
功能: 将OPS + OPD 并送入 OPD

- 要求长度一致
- 源操作数可以使reg，mem，data，目的操作数是reg。mem
- 立即数比可以做目的操作数
- 两个数不能同时为mem
- 会影响标志位
```
例：
    11100011
+   10100000
-------------
1<- 10000011  
AL = 83H ,
AF = 0,CF = 1, OF = 0,PF = 0 ,SF = 1,ZF = 0;
(AF 与 SF同号为正，异号为负数）

习题：
AX = 790EH BX = 8831H
   0111 1001 0000 1110
 + 1000 1000 0011 0001
----------------------
1<-0000 0001 0011 1111
AX = 013FH
AF = 0,CF = 1, OF = 0,PF = 1 ,SF = 0,ZF = 0;
```

### 带进位的加指令 ADC



